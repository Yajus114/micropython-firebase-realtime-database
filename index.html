<html lang="en-US"><head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>micropython-firebase-realtime-database | Firebase implementation for Micropython optimized for ESP32</title>
<meta name="generator" content="Jekyll v3.9.0">
<meta property="og:title" content="micropython-firebase-realtime-database">
<meta property="og:locale" content="en_US">
<meta name="description" content="Firebase implementation for Micropython optimized for ESP32">
<meta property="og:description" content="Firebase implementation for Micropython optimized for ESP32">
<link rel="canonical" href="https://ckoever.github.io/micropython-firebase-realtime-database/">
<meta property="og:url" content="https://ckoever.github.io/micropython-firebase-realtime-database/">
<meta property="og:site_name" content="micropython-firebase-realtime-database">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="micropython-firebase-realtime-database">
<script type="application/ld+json">
{"@type":"WebSite","url":"https://ckoever.github.io/micropython-firebase-realtime-database/","headline":"micropython-firebase-realtime-database","description":"Firebase implementation for Micropython optimized for ESP32","name":"micropython-firebase-realtime-database","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link rel="stylesheet" href="/micropython-firebase-realtime-database/assets/css/style.css?v=c0ab75793f60dbbf0ed221914d845e4be8d5de26">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">micropython-firebase-realtime-database</h1>
      <h2 class="project-tagline">Firebase implementation for Micropython optimized for ESP32</h2>
      
        <a href="https://github.com/ckoever/micropython-firebase-realtime-database" class="btn">View on GitHub</a>
      
      
    </section>

    <section class="main-content">
      <h1 id="micropython-firebase-realtime-database">micropython-firebase-realtime-database</h1>
<p><strong>Firebase implementation</strong> based on <a href="https://firebase.google.com/docs/reference/rest/database">REST API</a> optimized for the <a href="https://github.com/micropython/micropython-esp32">ESP32 version of Micropython</a> based on <a href="https://github.com/vishal-android-freak/firebase-micropython-esp32">firebase-micropython-esp32</a> from vishal-android-freak. It shouldn’t be a problem to run it on other Micropython platforms.</p>

<h3 id="commands-that-are-implemented">Commands that are implemented</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- get (equal GET)
- getfile (equal GET)*
- put (equal PUT)
- patch (equal PATCH)
- addto (equal POST)
- delete (equal DELETE)
</code></pre></div></div>
<blockquote>
  <p>*getfile writes the data to a file to avoid RAM overflow</p>
</blockquote>

<h3 id="required-modules">Required modules</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ujson, usocket, ussl, _thread, time
</code></pre></div></div>

<h3 id="preparations">Preparations</h3>
<ol>
  <li>Create a <a href="https://firebase.google.com/products/realtime-database">Firebase Realtime Database</a>. (Console&gt;Add Project&gt;Realtime Database&gt;Create Database)</li>
</ol>

<p>In the end it should look something like this:</p>

<p><img src="https://user-images.githubusercontent.com/77546092/114287154-f6071b00-9a64-11eb-9214-de75753a71c3.png" alt="image"></p>

<ol>
  <li>Set rules to <strong>public</strong> * <em>(from now the data can be read and changed by anyone ⚠️)</em> *
_
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span>
  <span class="s">"rules"</span><span class="o">:</span> <span class="o">{</span>
 <span class="s">".read"</span><span class="o">:</span> <span class="kc">true</span><span class="o">,</span>
 <span class="s">".write"</span><span class="o">:</span> <span class="kc">true</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>Note the URL of the database
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://[PROJECT_ID].firebaseio.com/
</code></pre></div>    </div>
    <h2 id="example">Example</h2>
    <h3 id="1-connect-to-wifi">1. Connect to Wifi</h3>
  </li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">network</span>
<span class="n">wlan</span> <span class="o">=</span> <span class="n">network</span><span class="p">.</span><span class="n">WLAN</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">STA_IF</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">wlan</span><span class="p">.</span><span class="n">active</span><span class="p">()</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">wlan</span><span class="p">.</span><span class="n">isconnected</span><span class="p">():</span>
  <span class="n">wlan</span><span class="p">.</span><span class="n">active</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
  <span class="n">wlan</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">"SSID"</span><span class="p">,</span> <span class="s">"PASSWD"</span><span class="p">)</span>
  <span class="k">while</span> <span class="ow">not</span> <span class="n">wlan</span><span class="p">.</span><span class="n">isconnected</span><span class="p">():</span>
    <span class="k">pass</span>
</code></pre></div></div>

<h3 id="2-set-the-url-of-the-database">2. Set the URL of the database</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">ufirebase</span> <span class="k">as</span> <span class="n">firebase</span>
<span class="n">firebase</span><span class="p">.</span><span class="n">setURL</span><span class="p">(</span><span class="s">"https://[PROJECT_ID].firebaseio.com/"</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="get-data-from-the-database-optional-run-in-the-background">Get data from the database (optional run in the background)*</h3>
<blockquote>
  <p>*In this case you have to pay attention to the timing yourself, because the data needs time to be downloaded.
```python
firebase.get(“testtag”, “DATAvariable”[, bg=False])
print(firebase.DATAvariable) #None if no data found</p>
</blockquote>

<p>firebase.getfile(“testtag”, “DATAfile.txt”[, bg=False])
myfile=open(“DATAfile.txt”)
print(myfile.read())
myfile.close()</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>### Upload data to the database (runs in the background)
```python
firebase.put("testtag", "testtdata")
firebase.put("testtag", {"tag1": "data1", "tag2": "data2"})

firebase.addto("testtag", "data1")
</code></pre></div></div>
<h3 id="delete-data-from-the-database-runs-in-the-background">Delete data from the database (runs in the background)</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">firebase</span><span class="p">.</span><span class="n">delete</span><span class="p">(</span><span class="s">"testag"</span><span class="p">)</span>
</code></pre></div></div>
<h2 id="functionality">Functionality</h2>
<p>A thread is created for each command* entered. There is a kind of waiting loop for these commands, so <strong>only one connection can be executed at a time</strong>. So if you make 10 get commands, these are processed <strong>one after the other</strong>, which means that the <em>last command is executed much later</em>.</p>
<blockquote>
  <p>*with the exception of get and getfile with bg = False</p>
</blockquote>

<meta name="google-site-verification" content="FTs6IR_lrQ_1XqCMMtQI_AUInQqW3qCF3H7TV1QgqUY">



      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/ckoever/micropython-firebase-realtime-database">micropython-firebase-realtime-database</a> is maintained by <a href="https://github.com/ckoever">ckoever</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </section>

    
  

</body></html>
